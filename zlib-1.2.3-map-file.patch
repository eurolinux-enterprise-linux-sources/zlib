diff -uprN zlib-1.2.3.orig/Makefile.am zlib-1.2.3/Makefile.am
--- zlib-1.2.3.orig/Makefile.am	2012-06-08 13:21:23.000000000 +0200
+++ zlib-1.2.3/Makefile.am	2012-06-08 13:22:24.273132659 +0200
@@ -28,7 +28,7 @@ libz_pkgconfigdir = $(libdir)/pkgconfig
 libz_pkgconfig_DATA = zlib.pc
 
 # Use -version-number to match the file name used before autoconfiscation.
-libz_la_LDFLAGS = -version-number 1:2:3
+libz_la_LDFLAGS = -version-number 1:2:3 -Wl,--version-script,zlib.map
 
 include_HEADERS = zlib.h
 nodist_include_HEADERS = zconf.h
diff -uprN zlib-1.2.3.orig/zlib.map zlib-1.2.3/zlib.map
--- zlib-1.2.3.orig/zlib.map	1970-01-01 01:00:00.000000000 +0100
+++ zlib-1.2.3/zlib.map	2012-06-07 19:15:29.000000000 +0200
@@ -0,0 +1,42 @@
+ZLIB_1.2.0 {
+    compressBound;
+    deflateBound;
+    inflateBack;
+    inflateBackEnd;
+    inflateBackInit_;
+    inflateCopy;
+    deflate_copyright;
+    inflate_copyright;
+    inflate_fast;
+    inflate_table;
+    zcalloc;
+    zcfree;
+    z_errmsg;
+    _*;
+};
+
+ZLIB_1.2.0.2 {
+    gzclearerr;
+    gzungetc;
+    zlibCompileFlags;
+} ZLIB_1.2.0;
+
+ZLIB_1.2.0.8 {
+    deflatePrime;
+} ZLIB_1.2.0.2;
+
+ZLIB_1.2.2 {
+    adler32_combine;
+    crc32_combine;
+    deflateSetHeader;
+    inflateGetHeader;
+} ZLIB_1.2.0.8;
+
+ZLIB_1.2.2.3 {
+    deflateTune;
+    gzdirect;
+} ZLIB_1.2.2;
+
+ZLIB_1.2.2.4 {
+    inflatePrime;
+} ZLIB_1.2.2.3;
